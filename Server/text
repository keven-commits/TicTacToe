app.get("/dir", (req, res) => {
    writeToDisk
    res.send("200")
})

app.get("/server/UPLOAD/*p", (req, res) => {
    const p = req.params.p.join("/")
    console.log(p)

    const f = listEntry(p)

    res.send(f)
})

app.listen(port, () => {
    console.log(`Server listening on port ${port}`)
})

function writeToDisk() {
    const fileContent = "test";
    const filePath = "/UPLOAD/test";

    fs.writeFile(filePath, fileContent, (err) => {
        if (err) {
            console.error("Error writing file", err)
            return;
        }
        console.log(`File "${filePath}" has been written successfully`)
    })
}
function listEntry(base) {
    try {
        const files = fs.readdirSync("/" + base);
        console.log("Files and directories in the path");
        files.forEach((file) => {
            console.log(file);
        });
        return files
    } catch (err) {
        console.error("Error readind directory : ", err)
    }
}